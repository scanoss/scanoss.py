name: Repo Version Tagging
# This workflow will read the version details from the repo and apply a branch

on:
  workflow_dispatch:
    inputs:
      run_for_real:
        required: true
        default: false
        type: boolean
        description: "Apply next tag (or Dry Run)"

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: '0'
      - name: Set up Python
        uses: actions/setup-python@v3
        with:
          python-version: '3.10.x'
      - name: Determine Tag
        id: taggerVersion
        run: |
          app_version=$(tools/get_next_version.sh)
          echo "tag_ver=$app_version" >> $GITHUB_OUTPUT

      - name: Run Tagging
        if: ${{ inputs.run_for_real }}
        id: taggerApply
        run: |
          echo "Applying tag $app_version ..."
          
